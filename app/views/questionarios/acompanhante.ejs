<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instituto Vita</title>
    <link rel="icon" href="/image/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=EB+Garamond&family=Uncial+Antiqua&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/questionarios/style_acompanhante.css">
    <style>
        /* Estilo para os avisos de campo obrigatório */
        .alert-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 10000;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .alert-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 12px 20px;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 500px;
            animation: slideDown 0.3s ease-out;
        }

        .alert-message::before {
            content: "⚠️";
            font-size: 16px;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Marcar campos com erro */
        .input-error {
            border-color: #dc3545 !important;
            background-color: #fff8f8 !important;
        }

        .label-error {
            color: #dc3545 !important;
            font-weight: bold !important;
        }
    </style>
</head>

<body>

    <nav>
        <div class="nav-links">
            <a href="/" class="img">
                <img src="/image/logo.png" alt="Logo da Empresa" class="img-logo">
            </a>
            <a href="/nav/sobre-nos">Sobre nós</a>
            <a href="/nav/sobre-cancer">Sobre o câncer</a>
            <a href="/nav/acomodacoes">Acomodações</a>
            <a href="/nav/apoio-paciente">Apoio ao paciente</a>
            <a href="/nav/localizacao">Localizações</a>
            <a href="/perguntas/perguntas-frequentes">Perguntas frequentes</a>
            <% if (!user) { %>
                <!-- Usuário não logado -->
                <a href="/usuarios/login" class="btn-entrar">Entrar</a>
                <a href="/usuarios/cadastro" class="btn-cadastrar">Cadastrar</a>
                <% } else { %>
                    <!-- Usuário logado -->
                    <% if (user.tipo==='paciente' ) { %>
                        <a href="/paciente/minhas-reservas" class="btn-nav">Minhas Reservas</a>
                        <% } else if (user.tipo==='acompanhante' ) { %>
                            <a href="/acompanhante/apoio-ao-paciente" class="btn-nav">Apoio ao Paciente</a>
                            <% } else if (user.tipo==='voluntario' ) { %>
                                <a href="/voluntario/area-do-voluntario" class="btn-nav">Área do Voluntários</a>
                                <% } else if (user.tipo==='doador' ) { %>
                                    <a href="/doador/minhas-doacoes" class="btn-nav">Minhas Doações</a>
                                    <% } else if (user.tipo==='admin' ) { %>
                                        <a href="/admin/painel" class="btn-nav">Configurações</a>
                                        <% } else { %>
                                            <!-- Caso algum outro tipo apareça -->
                                            <a href="/usuarios/login" class="btn-entrar">Entrar</a>
                                            <a href="/usuarios/cadastro" class="btn-cadastrar">Cadastrar</a>
                                            <% } %>
                                                <!-- Botão de logout -->
                                                <a href="/usuarios/logout" class="btn-logout">Sair</a>
                                                <% } %>
        </div>
    </nav>

    <!-- Estrutura de Wrapper adicionada para aplicar o estilo principal -->
    <main>
        <div class="form-wrapper">
            <h2>Cadastro de Acompanhante</h2>
            <!-- Ação do formulário EJS mantida -->
            <form action="/questionarios/acompanhante/<%= usuarioId %>" method="POST">

                <!-- Agrupamento de campos em duas colunas -->
                <div class="field-group">

                    <!-- Nome completo -->
                    <div class="form-control">
                        <label for="nome">Nome completo:</label>
                        <input type="text" id="nome" name="acompanhante_nome" required>
                    </div>

                    <!-- CPF -->
                    <div class="form-control">
                        <label for="cpf">CPF:</label>
                        <input type="text" id="cpf" name="acompanhante_cpf" maxlength="14" placeholder="000.000.000-00"
                            required>
                    </div>

                    <!-- RG -->
                    <div class="form-control">
                        <label for="rg">RG:</label>
                        <input type="text" id="rg" name="acompanhante_rg" maxlength="14" placeholder="00.000.000-0"
                            required>
                    </div>

                    <!-- Data de nascimento -->
                    <div class="form-control">
                        <label for="data_nascimento">Data de nascimento:</label>
                        <input type="date" id="data_nascimento" name="acompanhante_data_nascimento">
                    </div>

                    <!-- Sexo -->
                    <div class="form-control">
                        <label for="sexo">Sexo:</label>
                        <select id="sexo" name="paciente_sexo">
                            <option value="">Selecione</option>
                            <option value="Masculino">Masculino</option>
                            <option value="Feminino">Feminino</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>

                    <!-- Parentesco -->
                    <div class="form-control">
                        <label for="parentesco">Parentesco:</label>
                        <input type="text" id="parentesco" name="acompanhante_parentesco" maxlength="100"
                            placeholder="Ex: Pai, Mãe, Irmão">
                    </div>

                    <!-- Telefone -->
                    <div class="form-control">
                        <label for="telefone">Telefone:</label>
                        <input type="tel" id="telefone" name="acompanhante_telefone" maxlength="20"
                            placeholder="(00) 00000-0000">
                    </div>

                    <!-- Endereço -->
                    <div class="form-control">
                        <label for="endereco">Logradouro / Endereço:</label>
                        <input type="text" id="endereco" name="acompanhante_endereco">
                    </div>

                    <div class="form-control">
                        <label for="numero">Número:</label>
                        <input type="text" id="numero" name="acompanhante_numero">
                    </div>

                    <div class="form-control">
                        <label for="complemento">Complemento:</label>
                        <input type="text" id="complemento" name="acompanhante_complemento">
                    </div>

                    <div class="form-control">
                        <label for="cidade">Cidade:</label>
                        <input type="text" id="cidade" name="acompanhante_cidade">
                    </div>

                    <div class="form-control">
                        <label for="estado">Estado:</label>
                        <input type="text" id="estado" name="acompanhante_estado">
                    </div>

                    <!-- Paciente vinculado - Ficará em 1 coluna se a tela for estreita ou 2 se for larga -->
                    <div class="form-control full-width">
                        <label for="paciente_email">Email do Paciente:</label>
                        <input type="email" id="paciente_email" name="paciente_email" placeholder="Email do paciente"
                            required>
                    </div>

                    <!-- Observações - Ocupa a largura total na linha -->
                    <div class="form-control full-width">
                        <label for="observacoes">Observações:</label>
                        <textarea id="observacoes" name="acompanhante_observacoes" rows="3"></textarea>
                    </div>
                </div> <!-- Fim field-group -->

                <!-- Botão de envio -->
                <button type="submit">Enviar</button>
            </form>
        </div>
    </main> <!-- Fim form-wrapper -->

    <footer>
        <div class="footer-container">
            <div class="footer-about">
                <h3>Sobre a Empresa</h3>
                <p>Somos uma organização dedicada a oferecer hospedagem com amor, cuidado e dignidade para pacientes e
                    familiares.</p>
            </div>
            <div class="footer-contact">
                <h3>Contato</h3>
                <p>Email: contato@empresa.com.br</p>
                <p>Telefone: (11) 1234-5678</p>
                <p>Endereço: Rua Exemplo, 123 - São Paulo, SP</p>
            </div>
            <div class="footer-links">
                <h3>Links Úteis</h3>
                <a href="#">Política de Privacidade</a><br>
                <a href="#">Termos de Uso</a><br>
                <a href="#">Ajuda</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2024 Empresa. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        /*====== MENU MOBILE ======*/
        const hamburger = document.createElement("div");
        hamburger.classList.add("hamburger");
        hamburger.innerHTML = "<span></span><span></span><span></span>";

        document.querySelector("nav").prepend(hamburger);

        hamburger.addEventListener("click", () => {
            document.querySelector(".nav-links").classList.toggle("active");
        });
    </script>

    <script>
        // Validação de campos obrigatórios
        document.querySelector('form').addEventListener('submit', function (e) {
            e.preventDefault();

            // Limpar erros anteriores
            clearErrors();

            // Campos obrigatórios
            const requiredFields = [
                { id: 'nome', name: 'nome completo' },
                { id: 'cpf', name: 'CPF' },
                { id: 'rg', name: 'RG' },
                { id: 'paciente_email', name: 'email do paciente' }
            ];

            let hasError = false;
            let firstErrorField = null;

            // Verificar campos obrigatórios
            requiredFields.forEach(field => {
                const input = document.getElementById(field.id);
                if (!input || !input.value.trim()) {
                    showError(field.id, field.name);
                    hasError = true;
                    if (!firstErrorField) firstErrorField = input;
                }
            });

            // Se não houver erro, submeter o formulário
            if (!hasError) {
                this.submit();
            } else {
                // Focar no primeiro campo com erro
                if (firstErrorField) {
                    firstErrorField.focus();
                }
            }
        });

        function showError(fieldId, fieldName) {
            const input = document.getElementById(fieldId);
            const label = document.querySelector(`label[for="${fieldId}"]`);

            if (input) {
                input.classList.add('input-error');
            }

            if (label) {
                label.classList.add('label-error');
            }

            // Criar ou atualizar alerta
            let alertDiv = document.querySelector('.alert-wrapper');
            if (!alertDiv) {
                alertDiv = document.createElement('div');
                alertDiv.className = 'alert-wrapper';
                document.body.prepend(alertDiv);
            }

            alertDiv.innerHTML = `
            <div class="alert-message">
                Por favor, preencha o campo: ${fieldName}
            </div>
        `;

            // Remover alerta após 5 segundos
            setTimeout(() => {
                if (alertDiv) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        function clearErrors() {
            // Remover classes de erro
            document.querySelectorAll('.input-error').forEach(el => {
                el.classList.remove('input-error');
            });

            document.querySelectorAll('.label-error').forEach(el => {
                el.classList.remove('label-error');
            });

            // Remover alerta
            const alertDiv = document.querySelector('.alert-wrapper');
            if (alertDiv) {
                alertDiv.remove();
            }
        }

        // Remover erro quando o usuário começar a digitar
        document.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('input', function () {
                this.classList.remove('input-error');
                const label = document.querySelector(`label[for="${this.id}"]`);
                if (label) {
                    label.classList.remove('label-error');
                }
            });
        });
    </script>
</body>


</html>