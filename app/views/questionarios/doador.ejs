<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fundação Vita</title>
    <link rel="icon" href="/image/logo.png">
    <link rel="stylesheet" href="/css/questionarios/style_doador.css">
</head>

<body> 
    <div class="form-wrapper">
        <h2>Cadastro de Doador</h2>

        <% if (erro) { %>
            <p class="error-message">
                <%= erro %>
            </p>
            <% } %>

                <form method="POST">
                    <input type="hidden" name="usuario_id" value="<%= usuarioId %>">

                    <!-- TIPO DE PESSOA -->
                    <fieldset>
                        <legend>Tipo de Pessoa</legend>
                        <div class="form-control">
                            <label for="tipo_pessoa">Selecione o tipo de pessoa:</label>
                            <select id="tipo_pessoa" name="tipo_pessoa" required>
                                <option value="">Selecione</option>
                                <option value="fisica">Pessoa Física</option>
                                <option value="juridica">Pessoa Jurídica</option>
                            </select>
                        </div>
                    </fieldset>

                    <!-- INFORMAÇÕES PESSOAIS - PESSOA FÍSICA -->
                    <fieldset id="fieldset_pf" style="display: none;">
                        <legend>Informações Pessoais (Pessoa Física)</legend>
                        <div class="field-group">
                            <div class="form-control">
                                <label for="doador_nome">Nome completo:</label>
                                <input type="text" id="doador_nome" name="doador_nome">
                            </div>

                            <div class="form-control">
                                <label for="doador_cpf">CPF:</label>
                                <input type="text" id="doador_cpf" name="doador_cpf" maxlength="14"
                                    placeholder="000.000.000-00">
                            </div>

                            <div class="form-control">
                                <label for="doador_rg">RG:</label>
                                <input type="text" id="doador_rg" name="doador_rg">
                            </div>

                            <div class="form-control">
                                <label for="doador_data_nascimento">Data de nascimento:</label>
                                <input type="date" id="doador_data_nascimento" name="doador_data_nascimento">
                            </div>

                            <div class="form-control">
                                <label for="doador_sexo">Sexo:</label>
                                <select id="doador_sexo" name="doador_sexo">
                                    <option value="">Selecione</option>
                                    <option value="Masculino">Masculino</option>
                                    <option value="Feminino">Feminino</option>
                                    <option value="Outro">Outro</option>
                                    <option value="Prefiro_nao_informar">Prefiro não informar</option>
                                </select>
                            </div>

                            <div class="form-control">
                                <label for="doador_telefone">Telefone:</label>
                                <input type="tel" id="doador_telefone" name="doador_telefone"
                                    placeholder="(00) 00000-0000">
                            </div>
                        </div>
                    </fieldset>

                    <!-- INFORMAÇÕES PESSOAIS - PESSOA JURÍDICA -->
                    <fieldset id="fieldset_pj" style="display: none;">
                        <legend>Informações Pessoais (Pessoa Jurídica)</legend>
                        <div class="field-group">
                            <div class="form-control">
                                <label for="doador_nome_empresa">Nome da Empresa:</label>
                                <input type="text" id="doador_nome_empresa" name="doador_nome_empresa">
                            </div>

                            <div class="form-control">
                                <label for="doador_area_atuacao_empresa">Área de Atuação da Empresa:</label>
                                <input type="text" id="doador_area_atuacao_empresa" name="doador_area_atuacao_empresa">
                            </div>

                            <div class="form-control">
                                <label for="doador_cnpj">CNPJ:</label>
                                <input type="text" id="doador_cnpj" name="doador_cnpj" maxlength="18"
                                    placeholder="00.000.000/0000-00">
                            </div>

                            <div class="form-control">
                                <label for="doador_telefone_empresa">Telefone da Empresa:</label>
                                <input type="tel" id="doador_telefone_empresa" name="doador_telefone_empresa"
                                    placeholder="(00) 00000-0000">
                            </div>

                            <div class="form-control">
                                <label for="doador_representante">Nome do Representante Legal:</label>
                                <input type="text" id="doador_representante" name="doador_representante">
                            </div>

                            <div class="form-control">
                                <label for="doador_cpf_representante">CPF do Representante:</label>
                                <input type="text" id="doador_cpf_representante" name="doador_cpf_representante"
                                    maxlength="14" placeholder="000.000.000-00">
                            </div>
                        </div>
                    </fieldset>

                    <!-- ENDEREÇO -->
                    <fieldset>
                        <legend>Endereço</legend>
                        <div class="field-group">
                            <div class="form-control">
                                <label for="doador_endereco">Logradouro:</label>
                                <input type="text" id="doador_endereco" name="doador_endereco">
                            </div>

                            <div class="form-control">
                                <label for="doador_numero">Número:</label>
                                <input type="text" id="doador_numero" name="doador_numero">
                            </div>

                            <div class="form-control">
                                <label for="doador_complemento">Complemento:</label>
                                <input type="text" id="doador_complemento" name="doador_complemento">
                            </div>

                            <div class="form-control">
                                <label for="doador_bairro">Bairro:</label>
                                <input type="text" id="doador_bairro" name="doador_bairro">
                            </div>

                            <div class="form-control">
                                <label for="doador_cidade">Cidade:</label>
                                <input type="text" id="doador_cidade" name="doador_cidade">
                            </div>

                            <div class="form-control">
                                <label for="doador_estado">Estado:</label>
                                <input type="text" id="doador_estado" name="doador_estado">
                            </div>
                        </div>
                        <div class="form-control">
                            <label for="doador_cep">CEP:</label>
                            <input type="text" id="doador_cep" name="doador_cep">
                        </div>
                    </fieldset>

                    <button type="submit">Enviar Cadastro</button>
                </form>
    </div>

    <script>
        document.getElementById('tipo_pessoa').addEventListener('change', function () {
            const tipo = this.value;
            const fieldsetPf = document.getElementById('fieldset_pf');
            const fieldsetPj = document.getElementById('fieldset_pj');

            if (tipo === 'fisica') {
                fieldsetPf.style.display = 'block';
                fieldsetPj.style.display = 'none';
                // Tornar campos PF obrigatórios
                document.querySelectorAll('#fieldset_pf input, #fieldset_pf select').forEach(el => {
                    if (el.id !== 'doador_telefone') el.required = true; // Exemplo: telefone opcional
                });
                // Remover required de PJ
                document.querySelectorAll('#fieldset_pj input, #fieldset_pj select').forEach(el => {
                    el.required = false;
                });
            } else if (tipo === 'juridica') {
                fieldsetPf.style.display = 'none';
                fieldsetPj.style.display = 'block';
                // Tornar campos PJ obrigatórios
                document.querySelectorAll('#fieldset_pj input, #fieldset_pj select').forEach(el => {
                    if (el.id !== 'doador_telefone_pj') el.required = true; // Exemplo: telefone opcional
                });
                // Remover required de PF
                document.querySelectorAll('#fieldset_pf input, #fieldset_pf select').forEach(el => {
                    el.required = false;
                });
            } else {
                fieldsetPf.style.display = 'none';
                fieldsetPj.style.display = 'none';
            }
        });
    </script>
</body>

</html>