<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel do Acompanhante - Instituto Vita</title>
    <link rel="icon" href="/image/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=EB+Garamond&family=Uncial+Antiqua&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/acompanhante/style_apoio_ao_paciente.css">
</head>

<body>

    <nav>
        <a href="/" class="img">
            <img src="/image/logo.png" alt="Logo da Empresa" class="img-logo">
        </a>
        <a href="/nav/sobre-nos">Sobre n√≥s</a>
        <a href="/nav/sobre-cancer">Sobre o c√¢ncer</a>
        <a href="/nav/acomodacoes">Acomoda√ß√µes</a>
        <a href="/nav/apoio-paciente">Apoio ao paciente</a>
        <a href="/nav/localizacao">Localiza√ß√µes</a>
        <a href="/perguntas/perguntas-frequentes">Perguntas frequentes</a>
        <% if (!user) { %>
            <!-- Usu√°rio n√£o logado -->
            <a href="/usuarios/login" class="btn-entrar">Entrar</a>
            <a href="/usuarios/cadastro" class="btn-cadastrar">Cadastrar</a>
            <% } else { %>
                <!-- Usu√°rio logado -->
                <% if (user.tipo==='paciente' ) { %>
                    <a href="/paciente/minhas-reservas" class="btn-nav">Minhas Reservas</a>
                    <% } else if (user.tipo==='acompanhante' ) { %>
                        <a href="/acompanhante/apoio-ao-paciente" class="btn-nav">Apoio ao Paciente</a>
                        <% } else if (user.tipo==='voluntario' ) { %>
                            <a href="/voluntario/area-do-voluntario" class="btn-nav">√Årea do Volunt√°rios</a>
                            <% } else if (user.tipo==='doador' ) { %>
                                <a href="/doador/minhas-doacoes" class="btn-nav">Minhas Doa√ß√µes</a>
                                <% } else if (user.tipo==='admin' ) { %>
                                    <a href="/admin/painel" class="btn-nav">Configura√ß√µes</a>
                                    <% } else { %>
                                        <!-- Caso algum outro tipo apare√ßa -->
                                        <a href="/usuarios/login" class="btn-entrar">Entrar</a>
                                        <a href="/usuarios/cadastro" class="btn-cadastrar">Cadastrar</a>
                                        <% } %>
                                            <!-- Bot√£o de logout -->
                                            <a href="/usuarios/logout" class="btn-logout">Sair</a>
                                            <% } %>
    </nav>

    <div class="painel-container">
        <aside class="sidebar">
            <div class="sidebar-item active" data-target="conta" tabindex="0">
                <span class="icon" aria-hidden="true">üë§</span>
                <span>Minha Conta</span>
            </div>
            <div class="sidebar-item" data-target="paciente">
                <span class="icon">üë©‚Äç‚öïÔ∏è</span>
                <span> Paciente </span>
            </div>
            <div class="sidebar-item" data-target="agenda">
                <span class="icon">üìÖ</span>
                Agenda do Paciente
            </div>
            <div class="sidebar-item" data-target="orientacoes">
                <span class="icon">üìò</span>
                Orienta√ß√µes e Recursos
            </div>
            <div class="sidebar-item" data-target="feedback">
                <span class="icon">üìù</span>
                Feedback e Avalia√ß√µes
            </div>
        </aside>

        <main>

            <!-- ======================================================================================================================-->
            <!--===================================================== MINHA CONTA =====================================================-->
            <!--====================================================================================================================== -->
            <section id="conta" class="conteudo ativo">
                <h2 class="section-title">üë§ Minha Conta ‚Äî Acompanhante</h2>

                <form id="formConta" class="info-form">

                    <div class="info-card">
                        <h3 class="section-subtitle">Conta</h3>
                        <div class="form-group">
                            <label>Email (login):</label>
                            <input type="email" name="usuario_email" value="<%= dados.usuario_email %>" readonly>
                        </div>
                    </div>

                    <div class="info-card">
                        <h3 class="section-subtitle">Informa√ß√µes Pessoais</h3>

                        <div class="form-group">
                            <label>Nome Completo:</label>
                            <input type="text" id="acompanhante_nome" name="acompanhante_nome"
                                value="<%= dados.acompanhante_nome %>">
                        </div>

                        <div class="form-group">
                            <label>CPF:</label>
                            <input type="text" id="acompanhante_cpf" name="acompanhante_cpf"
                                value="<%= dados.acompanhante_cpf %>">
                        </div>

                        <div class="form-group">
                            <label>RG:</label>
                            <input type="text" id="acompanhante_rg" name="acompanhante_rg"
                                value="<%= dados.acompanhante_rg %>">
                        </div>

                        <div class="form-group">
                            <label>Data de Nascimento:</label>
                            <input type="date" id="acompanhante_data_nascimento" name="acompanhante_data_nascimento"
                                value="<%= dados.acompanhante_data_nascimento ? dados.acompanhante_data_nascimento.toISOString().substring(0,10) : '' %>">

                        </div>

                        <div class="form-group">
                            <label>Sexo:</label>
                            <select id="acompanhante_sexo" name="acompanhante_sexo">
                                <option <%=dados.acompanhante_sexo==='Masculino' ?'selected':'' %> >Masculino</option>
                                <option <%=dados.acompanhante_sexo==='Feminino' ?'selected':'' %> >Feminino</option>
                                <option <%=dados.acompanhante_sexo==='Outro' ?'selected':'' %> >Outro</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Parentesco com o Paciente:</label>
                            <input type="text" id="acompanhante_parentesco" name="acompanhante_parentesco"
                                value="<%= dados.acompanhante_parentesco %>">
                        </div>

                        <div class="form-group">
                            <label>Telefone:</label>
                            <input type="text" id="acompanhante_telefone" name="acompanhante_telefone"
                                value="<%= dados.acompanhante_telefone %>">
                        </div>
                    </div>

                    <div class="info-card">
                        <h3 class="section-subtitle">Endere√ßo</h3>

                        <div class="form-group">
                            <label>Endere√ßo:</label>
                            <input type="text" id="acompanhante_endereco" name="acompanhante_endereco"
                                value="<%= dados.acompanhante_endereco %>">
                        </div>

                        <div class="form-group">
                            <label>N√∫mero:</label>
                            <input type="number" id="acompanhante_numero" name="acompanhante_numero"
                                value="<%= dados.acompanhante_numero %>">
                        </div>

                        <div class="form-group">
                            <label>Complemento:</label>
                            <input type="text" id="acompanhante_complemento" name="acompanhante_complemento"
                                value="<%= dados.acompanhante_complemento %>">
                        </div>

                        <div class="form-group">
                            <label>Cidade:</label>
                            <input type="text" id="acompanhante_cidade" name="acompanhante_cidade"
                                value="<%= dados.acompanhante_cidade %>">
                        </div>

                        <div class="form-group">
                            <label>Estado:</label>
                            <input type="text" id="acompanhante_estado" name="acompanhante_estado"
                                value="<%= dados.acompanhante_estado %>">
                        </div>
                    </div>

                    <div class="info-card">
                        <h3 class="section-subtitle">Observa√ß√µes</h3>
                        <textarea id="acompanhante_observacoes"
                            name="acompanhante_observacoes"><%= dados.acompanhante_observacoes %></textarea>
                    </div>

                    <button id="btnSalvar" type="button" class="btn">Salvar Altera√ß√µes</button>

                    <hr>

                    <button id="btnExcluir" type="button" class="btn excluir">Excluir Minha Conta</button>
                </form>

                <script>
                    document.addEventListener("DOMContentLoaded", () => {

                        const inputs = document.querySelectorAll("#formConta input, #formConta select, #formConta textarea");
                        const btnSalvar = document.getElementById("btnSalvar");
                        const btnExcluir = document.getElementById("btnExcluir");

                        btnSalvar.onclick = async () => {

                            const dados = {};

                            inputs.forEach(i => {
                                dados[i.name] = i.value;
                            });

                            const reqApi = await fetch("/acompanhante/atualizar", {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify(dados)
                            });

                            const res = await reqApi.json();


                            if (!res.ok) return alert("Erro ao salvar: " + res.message);

                            alert("Dados atualizados com sucesso!");
                            window.location.reload();
                        };

                        btnExcluir.onclick = async () => {
                            if (!confirm("Tem certeza que deseja excluir sua conta?")) return;

                            const req = await fetch("/acompanhante/excluir/<%= dados.usuario_id %>", {
                                method: "DELETE"
                            });

                            const res = await req.json();

                            if (res.ok) window.location.href = "/";
                            else alert("Erro ao excluir: " + res.message);
                        };
                    });
                </script>

            </section>

            <!-- ======================================================================================================================-->
            <!--================================================= PACIENTE VINCULADO ==================================================-->
            <!--====================================================================================================================== -->
            <section id="paciente" class="conteudo">
                <h2 class="section-title">üë©‚Äç‚öïÔ∏è Paciente Vinculado</h2>
                <p class="subtitle">Informa√ß√µes completas do paciente sob seus cuidados</p>
                <!-- GRID PRINCIPAL -->
                <div class="paciente-grid">

                    <!-- CARD ‚Äî Ficha -->
                    <div class="paciente-card destaque">
                        <h3>üóÇÔ∏è Ficha do Paciente</h3>

                        <div class="info-linha">
                            <span>Nome:</span>
                            <p>
                                <%= paciente.paciente_nome %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>Data de Nascimento:</span>
                            <p>
                                <%= paciente.paciente_data_nascimento %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>Sexo:</span>
                            <p>
                                <%= paciente.paciente_sexo %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>Diagn√≥stico:</span>
                            <p>
                                <%= paciente.paciente_diagnostico %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>M√©dico Respons√°vel:</span>
                            <p>
                                <%= paciente.paciente_medico_assistente_nome %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>Centro de Tratamento:</span>
                            <p>
                                <%= paciente.paciente_centro_tratamento_nome %>
                            </p>
                        </div>
                    </div>

                    <!-- CARD ‚Äî Situa√ß√£o Atual -->
                    <div class="paciente-card">
                        <h3>üìä Situa√ß√£o Atual</h3>

                        <div class="info-linha">
                            <span>Fase do Tratamento:</span>
                            <p>
                                <%= paciente.paciente_fase_tratamento %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>Tipo de Tratamento:</span>
                            <p>
                                <%= paciente.paciente_tipo_tratamento %>
                            </p>
                        </div>

                        <div class="info-linha">
                            <span>√öltima Sess√£o:</span>
                            <p>
                                <%= paciente.paciente_data_ultima_sessao %>
                            </p>
                        </div>

                        <div class="info-linha observacoes">
                            <span>Observa√ß√µes:</span>
                            <p>
                                <%= paciente.paciente_observacoes_enfermagem %>
                            </p>
                        </div>
                    </div>

                </div>
                <!-- CARD ‚Äî Informa√ß√µes Gerais -->
                <div class="card-geral">
                    <h3>üß¨ Informa√ß√µes Gerais</h3>

                    <div class="info-linha">
                        <span>Alergias:</span>
                        <p>
                            <%= paciente.paciente_alergias_risco %>
                        </p>
                    </div>

                    <div class="info-linha">
                        <span>Restri√ß√£o Alimentar:</span>
                        <p>
                            <%= paciente.paciente_restricoes_alimentares %>
                        </p>
                    </div>

                    <div class="info-linha">
                        <span>Medicamentos Essenciais:</span>
                        <p>
                            <%= paciente.paciente_medicamentos_uso_essenciais %>
                        </p>
                    </div>
                </div>
            </section>

            <!-- ======================================================================================================================-->
            <!--======================================================= AGENDA ========================================================-->
            <!--====================================================================================================================== -->
            <section id="agenda" class="conteudo">
                <h2 class="section-title">üìÖ Agenda do Paciente</h2>
                <p class="subtitle">Visualize as pr√≥ximas atividades e compromissos.</p>
                <div class="card">
                    <h3 class="card-title">Pr√≥ximos Eventos</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Hor√°rio</th>
                                <th>Atividade</th>
                                <th>Local</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>24/10/2025</td>
                                <td>09:00</td>
                                <td>Quimioterapia</td>
                                <td>Sala 02</td>
                                <td><button class="btn-sm btn-secondary">Acompanhar</button></td>
                            </tr>
                            <tr>
                                <td>26/10/2025</td>
                                <td>14:30</td>
                                <td>Consulta m√©dica</td>
                                <td>Consult√≥rio 3</td>
                                <td><button class="btn-sm btn-secondary">Acompanhar</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn-download mt-3">Exportar Agenda (PDF)</button>
                </div>
            </section>

            <!-- ======================================================================================================================-->
            <!--===================================================== ORIENTA√á√ïES =====================================================-->
            <!--====================================================================================================================== -->
            <section id="orientacoes" class="conteudo">

                <!-- HEADER DA SECTION -->
                <div class="orientacoes-header">
                    <div>
                        <h2>üìò Orienta√ß√µes e Recursos</h2>
                        <p class="subtitulo">Materiais essenciais para apoiar pacientes e acompanhantes</p>
                    </div>
                </div>

                <!-- GRID PRINCIPAL -->
                <div class="orientacoes-grid">

                    <!-- GUIAS EDUCATIVOS -->
                    <div class="orientacao-card destaque">
                        <div class="card-top">
                            <h3>üìö Guias Educativos</h3>
                            <span class="tag">Conte√∫do Oficial</span>
                        </div>

                        <p class="card-desc">Materiais preparados pela equipe de enfermagem e nutri√ß√£o.</p>

                        <ul class="lista-links">
                            <li><a href="#">üßæ Cuidados Di√°rios do Paciente (PDF)</a></li>
                            <li><a href="#">ü•ó Alimenta√ß√£o Saud√°vel Durante o Tratamento</a></li>
                            <li><a href="#">üöó Transporte Seguro e Log√≠stica de Deslocamento</a></li>
                        </ul>
                    </div>

                    <!-- APOIO PSICOL√ìGICO -->
                    <div class="orientacao-card">
                        <div class="card-top">
                            <h3>üíö Apoio Psicol√≥gico</h3>
                            <span class="tag tag-suave">Bem-estar</span>
                        </div>

                        <p class="card-desc">Materiais fundamentais para lidar com ansiedade e estresse.</p>

                        <ul class="lista-links">
                            <li><a href="#">üßò T√©cnicas de Relaxamento</a></li>
                            <li><a href="#">üí¨ Grupo de Apoio Familiar</a></li>
                        </ul>
                    </div>

                    <!-- CONTATOS √öTEIS -->
                    <div class="orientacao-card">
                        <div class="card-top">
                            <h3>üìû Contatos √öteis</h3>
                            <span class="tag tag-info">Importante</span>
                        </div>

                        <p class="card-desc">Profissionais e servi√ßos dispon√≠veis em caso de necessidade.</p>

                        <div class="contatos-box">
                            <p><strong>Psic√≥loga:</strong> Ana L√∫cia ‚Äî (11) 99999-9999</p>
                            <p><strong>Assistente Social:</strong> Marcos ‚Äî (11) 98888-8888</p>
                            <p><strong>Emerg√™ncia:</strong> 192 (SAMU) / 193 (Bombeiros)</p>
                        </div>
                    </div>

                    <!-- BANNER LATERAL / NOVO BLOCO -->
                    <div class="orientacao-banner">
                        <h3>üåø Espa√ßo de Acolhimento</h3>
                        <p>
                            Nosso hotel oncol√≥gico oferece √°reas de descanso, aromaterapia,
                            oficinas de arte e apoio emocional.
                        </p>

                        <a href="#" class="btn-banner">Conhecer Programas</a>
                    </div>

                </div>
            </section>


            <!-- ======================================================================================================================-->
            <!--====================================================== FEEDBACK =======================================================-->
            <!--====================================================================================================================== -->
            <section id="feedback" class="conteudo">
                <h2 class="section-title">üìù Feedback e Avalia√ß√µes</h2>
                <div class="card card-avaliacao">
                    <h3 class="card-title">Avalie sua Experi√™ncia</h3>
                    <div class="estrelas">‚≠ê ‚≠ê ‚≠ê ‚≠ê ‚òÜ</div>
                    <textarea placeholder="Conte como foi sua experi√™ncia no Instituto Vita..." rows="4"></textarea>
                    <button class="btn-primary">Enviar Avalia√ß√£o</button>
                </div>

                <div class="card">
                    <h3 class="card-title">Relato de Experi√™ncia</h3>
                    <textarea placeholder="Deseja compartilhar algo com nossa equipe?" rows="4"></textarea>
                    <button class="btn-secondary">Enviar Relato</button>
                </div>
            </section>

        </main>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-about">
                <h3>Instituto Vita</h3>
                <p>Hospedagem humanizada e apoio integral a pacientes e acompanhantes.</p>
            </div>
            <div class="footer-contact">
                <h3>Contato</h3>
                <p>Email: contato@institutovita.com.br</p>
                <p>Telefone: (11) 1234-5678</p>
            </div>
        </div>
        <div class="footer-bottom">¬© 2025 Instituto Vita. Todos os direitos reservados.</div>
    </footer>

    <script>
        const sidebarItems = document.querySelectorAll('.sidebar-item');
        const contents = document.querySelectorAll('.conteudo');

        sidebarItems.forEach(item => {
            item.addEventListener('click', () => {
                sidebarItems.forEach(i => i.classList.remove('active'));
                contents.forEach(c => c.classList.remove('ativo'));
                item.classList.add('active');
                document.getElementById(item.dataset.target).classList.add('ativo');
            });
        });
    </script>

</body>

</html>